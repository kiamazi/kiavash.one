---
utid: 20180317164142
date: 2018-03-17 16:41:42
title: هک کردن جی‌میل برای استفاده کردن روی دامنه شخصی با کمک mailgun
_index: Hacking GMail to use custom domains for free with mailgun
categories:
  - اینترنت
tags:
  - ایمیل
  - gmail
  - custom domain
  - دامین شخصی
  - mailgun
---
من فکر میکنم که جی‌میل سرویس جذاب و کاربردی برای دریافت و ارسال و دسته بندی ایمیل‌ها هست، سریع هست، با سرویس‌های دیگه گوگل مثل درایو به خوبی یکپارچه شده و به جز برنامه استانداردی که برای مدیریت ایمل‌ها داره، میشه از [inbox](http://www.google.com/inbox/) هم برای مدیریت ایمیل‌ها استفاده کرد. در کل پر از خوبیای ریز و درشت و هست، البته به جز اون قسمتی که به گوگل امکان بیشتری میدیم که ثانیه به ثانیه زندگیمون رو بیشتر نظارت کنه.

از اونطرف داشتن یه آدرس ایمیل روی دامین شخصی هم جذاب هست، و اگر بخواید از ایمیل گوگل روی دامین شخصی خودتون استفاده کنید باید [سرویس گوگل بیزینس](https://www.google.com/work/apps/business/) رو با قیمت ماهیانه ۵ تا ۱۰دلار بخرید که برای اکثر کاربران امکانات گوگل بیزینس مورد نیاز نیستن و در نهایت تمام امکانات سرویس‌های شخصی رو هم، مثل inbox، دریافت نمیکنید.

بگذریم، به هرحال راه‌هایی هست که بشه از اکانت جی‌میل به صورت رایگان روی دامین شخصی استفاده کرد، یکی از این راه‌ها استفاده از [mailgun](https://mailgun.com/) هست. و تفاوت اصلیش با خیلی از روش‌های دیگه این هست که نیاز نداریم سرور ایمیل رو خودمون اجرا یا مدیریت کنیم و فقط ثبت کردن یک دامنه شخصی برامون کافیه و هزینه‌ی هاست یا سرور رو از دوش خودمون برمیداریم.

![mailgun](/images/2018-3-17-mailgun-000.png)

mailgun خودش رو به این صورت معرفی میکنه:

> powerful APIs that enable you to send, receive and track email effortlessly.

> API های قدرتمند که شما را قادر می سازد، بدون زحمت ایمیل‌ها را ارسال، دریافت و دنبال کنید 

با خواندن معرفی این سرویس فکر کنم متوجه شده باشید که چطور قراره از جی‌میل روی دامنه شخصی به صورت رایگان استفاده کنیم و اگر هم هنوز متوجه نشدید مطمینا براتون جالب خواهد بود که یاد بگیرید یک توسعه دهنده ابزار چطور با هک کردن ابزار موجود دم دستش یه چیز جدید میسازه. به شکل ساده mailgun دو جز داره که بهمون اجازه میده کاری که میخوایم رو انجام بدیم، یک سرویس فوروارد کردن ایمیل و یک سرور SMTP.

## تنظیم mailgun

در mailgun با استفاده از اکانت جی‌میل [ثبت نام](https://mailgun.com/signup) میکنیم، یک ایمیل برای تایید ثبت نام برامون فرستاده میشه که روی لینک تایید کلیک میکنیم و به mailgun لاگین میکنیم. وارد داشبورد کاربریمون میشیم، در منوی بالا وارد [قسمت Domains](https://app.mailgun.com/app/domains) میشیم و روی [Add New Domain](https://app.mailgun.com/app/domains/new) کلیک میکنیم و آدرس دامنه رو وارد میکنیم

![add domain in mail gun](/images/2018-3-17-mailgun-001.png)

بر اساس دستور العملی که سایت بهمون میده، DNS های دامنه‌مون رو تنظیم میکنیم. من از cloudflare برای مدیریت DNSهاس دامنه‌م استفاده میکنم به شکل خلاصه و سریع کارهایی که باید انجام بدیم رو در ادامه می‌نویسم

**۱-** یک cname با این مشخصات بسازید

	CNAME record > Name = email, Value = mailgun.org, TTL = Automatic

**۲-** دو رکورد MX با این مشخصات اضافه میکنیم

	Name = domain.com (no www), value = mxa.mailgun.org, Priority = 10
	Name = domain.com (no www), value = mxb.mailgun.org Priority = 10

به جای domain.com باید نام دامنه خودتون رو جایگزین کنید.
	
**۳-** دو رکورد TXT هم اضافه میکنیم

	Name= domain.com (no www), value = v=spf1…
	Name = smtp._domainkey, value = k=rsa;…

اینجا هم باید در خط اول اسم دامنه خودتون رو به جای domain.com بنویسید و آخر خط دوم هم بعد از rsa; به جای ... کلیدی که خود سایت بهتون داده رو اضافه کنید.

حالا باید صبر کنیم تا DNS ها تنظیم بشن که بین چند دقیقه تا چند ساعت ممکنه وقت بگیره. برای فعال شدن دامنه روی mailgun باید منتظر این تنظیم شدن بمونیم. بعد از تنظیم شدنشون برگردید به mailgun و دامنه رو فعال کنید.

حالا باید وارد قسمت Routes بشیم و روی دکمه‌ی Create Route در قسمت بالای صفحه کلیک میکنم، فیلدها رو به این صورت پر میکنیم:

	Expression Type : Match Recipient
	Recipient       : custom_mail@kiavash.one
	Action          : Forward
	                  google_account@gmail.com
	Priority        : 10
	Description     : هر توضیحی که دوست دارید

![add route](/images/2018-3-17-mailgun-002.png)

قدم اول تموم شد، از این به بعد هر ایمیلی که به آدرس custoam\_mail@kiavash.one فرستاده بشه رو من توی اینباکس google\_account@gmail.com دریافت می‌کنیم.

## ارسال ایمیل

در داشبورد دامنه وارد قسمت [Manage SMTP credentials](https://app.mailgun.com/app/domains/site.com/credentials) میشیم و روی New SMTP Credential کلیک میکنم و آدرس ایمیلی رو که میخوایم میسازیم، مثلا custom_mail@kiavash.one و یک پسور هم براش تنظیم میکنیم.

بعد توی قسمت تنظیمات gmail وارد تب [Accounts and Import](https://mail.google.com/mail/u/0/#settings/accounts) میشیم و توی قسمت Send mail as روی Add another email address you own کلیک میکنیم و آدرس ایمیلی که میخوایم برای فرستادن ایمیل ها ازش استفاده کنیم و توی مرحله قبل ساختیم رو وارد میکنیم.

![add gmail](/images/2018-3-17-mailgun-003.png)

و تنظیمات SMTP رو وارد میکنیم

![set smtp](/images/2018-3-17-mailgun-004.png)

	Server: smtp.mailgun.org
	Port: 587
	Username: The full email address, e.g. “custom_mail@kiavash.one”
	Password: YOUR PASSWORD set in mailgun

روی Add Account کلیک کنید، تمام شد. از سرویس رایگان ایمیل دامنه شخصی تا سقف ۱۰،۰۰۰ ایمیل در ماه لذت ببرید.





